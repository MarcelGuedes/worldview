<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>WorldView Live ‚Äì Globo com Snapshots</title>
  <style>
    body, html { 
      margin: 0; padding: 0; overflow: hidden; background: #121212; color: white; font-family: Arial, sans-serif; height: 100%; 
    }
    #container { 
      display: flex; height: 100vh; 
    }
    #menu-lateral { 
      width: 300px; background: #1e1e1e; padding: 20px; display: flex; flex-direction: column; 
    }
    #menu-lateral h1 { 
      margin-bottom: 20px; color: #00c8ff; 
    }
    #menu-lateral input, #menu-lateral select { 
      margin-bottom: 15px; padding: 10px; border: none; border-radius: 5px; font-size: 16px; 
    }
    #globo { 
      flex: 1; 
      width: 100%; 
      height: 100vh;  /* for√ßar altura total da viewport */
      position: relative; 
    }
    #camera-info { 
      position: absolute; top: 20px; right: 20px; max-width: 340px; background: rgba(0,0,0,0.85); padding: 15px; border-radius: 8px; 
      display: none; color: white; z-index: 10; 
    }
    #camera-info h3 { 
      margin-top: 0; color: #00c8ff; 
    }
    #camera-info img { 
      width: 100%; border-radius: 5px; margin-top: 10px; 
    }
    #camera-info button { 
      margin-top: 10px; padding: 8px 12px; background: #00c8ff; border: none; border-radius: 5px; cursor: pointer; color: #121212; 
    }
  </style>
</head>
<body>
  <div id="container">
    <div id="menu-lateral">
      <h1>üåç WorldView Snapshots</h1>
      <input type="text" id="search" placeholder="Buscar c√¢mera..." />
      <select id="filter-continent">
        <option value="all">Todos os continentes</option>
        <option value="america-norte">Am√©rica do Norte</option>
        <option value="america-sul">Am√©rica do Sul</option>
        <option value="europa">Europa</option>
        <option value="asia">√Åsia</option>
        <option value="oceania">Oceania</option>
        <option value="africa">√Åfrica</option>
      </select>
    </div>
    <div id="globo"></div>
  </div>

  <div id="camera-info">
    <h3 id="cam-title"></h3>
    <p id="cam-loc"></p>
    <img id="cam-img" src="" alt="Snapshot da c√¢mera">
    <button onclick="closeInfo()">Fechar</button>
  </div>

  <script src="https://unpkg.com/globe.gl"></script>
  <script>
    // Lista de c√¢meras
    const cameras = [
      { name: "Times Square (NY)", lat: 40.758, lng: -73.9855, continent: "america-norte", url: "https://live.staticflickr.com/65535/50963072737_69e87ca109_b.jpg" },
      { name: "Copacabana (RJ)", lat: -22.9711, lng: -43.1822, continent: "america-sul", url: "https://live.staticflickr.com/65535/50962698968_4f4b1a8bc3_b.jpg" },
      { name: "Shibuya Crossing (T√≥quio)", lat: 35.6595, lng: 139.7005, continent: "asia", url: "https://live.staticflickr.com/65535/50962922336_66d67e4f29_b.jpg" },
      { name: "Porto de Sydney", lat: -33.8568, lng: 151.2153, continent: "oceania", url: "https://live.staticflickr.com/65535/50962811252_5cc3d20836_b.jpg" },
      { name: "Tower Bridge (Londres)", lat: 51.5055, lng: -0.0754, continent: "europa", url: "https://live.staticflickr.com/65535/50962856257_227b90a2d1_b.jpg" }
    ];

    // Fun√ß√£o que retorna todas as c√¢meras SEM filtro para garantir pontos vis√≠veis
    function filterCameras() {
      // Voc√™ pode depois reativar filtros conforme desejar
      return cameras;
    }

    let globe = null;

    function initGlobe() {
      const filtered = filterCameras();

      if (!globe) {
        globe = Globe()
          .globeImageUrl('//unpkg.com/three-globe/example/img/earth-night.jpg')
          .pointsData(filtered)
          .pointLat('lat')
          .pointLng('lng')
          .pointColor(() => 'red')
          .pointAltitude(0.06)
          .pointLabel(d => d.name)
          .onPointClick(showInfo);

        globe(document.getElementById('globo'));
      } else {
        globe.pointsData(filtered);
      }
    }

    function showInfo(c) {
      document.getElementById('cam-title').textContent = c.name;
      document.getElementById('cam-loc').textContent = `Lat: ${c.lat}, Lng: ${c.lng}`;
      const img = document.getElementById('cam-img');
      img.src = '';
      img.src = c.url + '?_' + Date.now();
      document.getElementById('camera-info').style.display = 'block';
    }

    function closeInfo() {
      document.getElementById('camera-info').style.display = 'none';
    }

    document.getElementById('search').oninput = initGlobe;
    document.getElementById('filter-continent').onchange = initGlobe;

    window.onload = initGlobe;
  </script>
</body>
</html>
