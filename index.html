<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>WorldView Live ‚Äì Globo com V√≠deos Gravados</title>
  <style>
    body, html { margin: 0; padding: 0; overflow: hidden; background: #121212; color: white; font-family: Arial, sans-serif; height: 100%; }
    #container { display: flex; height: 100vh; }
    #menu-lateral { width: 300px; background: #1e1e1e; padding: 20px; display: flex; flex-direction: column; }
    #menu-lateral h1 { margin-bottom: 20px; color: #00c8ff; }
    #menu-lateral input, #menu-lateral select { margin-bottom: 15px; padding: 10px; border: none; border-radius: 5px; font-size: 16px; }
    #globo { flex: 1; position: relative; }
    #camera-info {
      position: absolute;
      top: 20px;
      right: 20px;
      max-width: 340px;
      background: rgba(0,0,0,0.85);
      padding: 15px;
      border-radius: 8px;
      display: none;
      color: white;
      z-index: 10;
    }
    #camera-info h3 { margin-top: 0; color: #00c8ff; }
    #camera-info iframe {
      width: 100%;
      height: 200px;
      border: none;
      border-radius: 5px;
      margin-top: 10px;
    }
    #camera-info button {
      margin-top: 10px;
      padding: 8px 12px;
      background: #00c8ff;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      color: #121212;
    }
  </style>
</head>
<body>
  <div id="container">
    <div id="menu-lateral">
      <h1>üåç WorldView Live</h1>
      <input type="text" id="search" placeholder="Buscar c√¢mera..." />
      <select id="filter-continent">
        <option value="all">Todos os continentes</option>
        <option value="america-norte">Am√©rica do Norte</option>
        <option value="america-sul">Am√©rica do Sul</option>
        <option value="europa">Europa</option>
        <option value="asia">√Åsia</option>
        <option value="oceania">Oceania</option>
        <option value="africa">√Åfrica</option>
      </select>
    </div>
    <div id="globo"></div>
  </div>

  <div id="camera-info">
    <h3 id="cam-title"></h3>
    <p id="cam-loc"></p>
    <div id="video-container"></div>
    <button onclick="closeInfo()">Fechar</button>
  </div>

  <script src="https://unpkg.com/globe.gl"></script>
  <script>
    // Lista de c√¢meras com v√≠deos gravados do YouTube
    const cameras = [
      {
        name: "Times Square (NY)",
        lat: 40.758,
        lng: -73.9855,
        continent: "america-norte",
        youtubeId: "AdUw5RdyZxI"
      },
      {
        name: "Copacabana (RJ)",
        lat: -22.9711,
        lng: -43.1822,
        continent: "america-sul",
        youtubeId: "04lqk8YjPYQ"
      },
      {
        name: "Shibuya Crossing (T√≥quio)",
        lat: 35.6595,
        lng: 139.7005,
        continent: "asia",
        youtubeId: "NLj1f8DP3wQ"
      },
      {
        name: "Porto de Sydney",
        lat: -33.8568,
        lng: 151.2153,
        continent: "oceania",
        youtubeId: "93BqLew6GnY"
      },
      {
        name: "Tower Bridge (Londres)",
        lat: 51.5055,
        lng: -0.0754,
        continent: "europa",
        youtubeId: "8osbR3t3gGc"
      }
    ];

    const searchInput = document.getElementById('search');
    const filterSelect = document.getElementById('filter-continent');
    const cameraInfo = document.getElementById('camera-info');
    const videoContainer = document.getElementById('video-container');

    // Filtra c√¢meras pelo texto e continente selecionado
    function filterCameras() {
      const searchTerm = searchInput.value.toLowerCase();
      const selectedContinent = filterSelect.value;

      return cameras.filter(cam => {
        const matchesName = cam.name.toLowerCase().includes(searchTerm);
        const matchesContinent = selectedContinent === 'all' || cam.continent === selectedContinent;
        return matchesName && matchesContinent;
      });
    }

    // Inicializa o globo e pinos
    let globe = null;

    function initGlobe() {
      const data = filterCameras();

      if (!globe) {
        globe = Globe()
          .globeImageUrl('//unpkg.com/three-globe/example/img/earth-night.jpg')
          .pointsData(data)
          .pointLat('lat')
          .pointLng('lng')
          .pointColor(() => 'red')
          .pointAltitude(0.07)
          .pointLabel(d => d.name)
          .onPointClick(showInfo);

        globe(document.getElementById('globo'));
      } else {
        globe.pointsData(data);
      }
    }

    // Mostra o v√≠deo no painel lateral
    function showInfo(cam) {
      document.getElementById('cam-title').textContent = cam.name;
      document.getElementById('cam-loc').textContent = `Lat: ${cam.lat}, Lng: ${cam.lng}`;
      videoContainer.innerHTML = `<iframe src="https://www.youtube.com/embed/${cam.youtubeId}?autoplay=1&mute=1" allow="autoplay; encrypted-media" allowfullscreen></iframe>`;
      cameraInfo.style.display = 'block';
    }

    // Fecha o painel de v√≠deo e para o iframe
    function closeInfo() {
      cameraInfo.style.display = 'none';
      videoContainer.innerHTML = '';
    }

    searchInput.addEventListener('input', initGlobe);
    filterSelect.addEventListener('change', initGlobe);

    window.onload = initGlobe;
    window.onresize = () => globe && globe.width(window.innerWidth - 300).height(window.innerHeight);
  </script>
</body>
</html>
